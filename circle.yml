# version: 2
# jobs:
#   build:
#     docker:
#       - image: alpine:3.5
#     working_directory: /home/circleci/blog
#     steps:
#       - setup_remote_docker:
#           reusable: true
#       - run:
#           name: Install System Dependencies
#           command: |
#             apk add --update --no-cache git openssh tar gzip ca-certificates
#       - run:
#           name: Install Docker client
#           command: |
#             VER="17.03.0-ce"
#             apk add curl
#             curl -L -o /tmp/docker-$VER.tgz https://get.docker.com/builds/Linux/x86_64/docker-$VER.tgz
#             tar -xz -C /tmp -f /tmp/docker-$VER.tgz
#             mv /tmp/docker/* /usr/bin
#       - checkout
#       - run:
#           name: Build b4b4r07/tellme.tokyo image
#           command: sh bin/build
#       - run:
#           name: Test b4b4r07/tellme.tokyo image
#           command: |
#             docker run -d --name blog b4b4r07/tellme.tokyo
#             docker run --network container:blog appropriate/curl --retry 10 --retry-connrefused http://localhost/healthz
#       - deploy:
#           name: Deploy b4b4r07/tellme.tokyo image
#           command: |
#             if [ -n "${CIRCLE_TAG}" ]; then
#               docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
#               bin/deploy
#               bin/deploy $CIRCLE_TAG
#             fi
